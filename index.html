<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Edukasi Hewan</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f8ff;
      text-align: center;
      padding: 20px;
      margin: 0;
    }
    .card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      max-width: 700px;
      margin: auto;
      padding: 20px;
    }
    img, video {
      max-width: 100%;
      border-radius: 10px;
      margin: 10px 0;
    }
    .options button {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      background-color: #3498db;
      color: white;
    }
    .options button:hover {
      background-color: #2980b9;
    }
    #musicToggle {
      position: fixed;
      top: 10px;
      right: 10px;
      background: #2ecc71;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
    }
    @media (max-width: 600px) {
      .card { padding: 10px; }
      .options button { font-size: 0.9rem; padding: 8px; }
      #musicToggle { padding: 8px; font-size: 0.9rem; }
    }
  </style>
</head>
<body>
  <button id="musicToggle">üîä Musik</button>
  <audio id="bgMusic" loop>
    <source src="https://cdn.pixabay.com/audio/2022/03/14/audio_6f0eb97f45.mp3" type="audio/mpeg">
  </audio>

  <div class="card">
    <h1>Game Edukasi Hewan</h1>
    <div id="questionContainer">
      <div id="questionText"></div>
      <div id="mediaContainer"></div>
      <div class="options" id="options"></div>
      <div id="timer"></div>
    </div>
    <div id="result"></div>
    <button id="nextBtn">Soal Berikutnya</button>
    <div id="score"></div>
    <h3>üèÜ Leaderboard</h3>
    <ul id="leaderboard"></ul>
  </div>

  <script>
    const questions = [
      { level: 'easy', question: 'Hewan ini bersuara "guk-guk".', options: ['Kucing', 'Anjing', 'Ayam', 'Sapi'], answer: 'Anjing', media: 'https://upload.wikimedia.org/wikipedia/commons/7/76/Dog_breed_Collage.png', type: 'img' },
      { level: 'easy', question: 'Hewan yang suka susu?', options: ['Gajah', 'Kucing', 'Kuda', 'Kambing'], answer: 'Kucing', media: 'https://upload.wikimedia.org/wikipedia/commons/3/3a/Cat03.jpg', type: 'img' },
      { level: 'easy', question: 'Hewan berkaki 2 yang bertelur?', options: ['Kucing', 'Ayam', 'Kuda', 'Singa'], answer: 'Ayam', media: 'https://upload.wikimedia.org/wikipedia/commons/b/bb/Chicken_in_Taiwan.jpg', type: 'img' },
      
      { level: 'medium', question: 'Hewan terbesar di laut?', options: ['Ikan Paus', 'Hiu', 'Kuda Laut', 'Lumba-lumba'], answer: 'Ikan Paus', media: 'https://upload.wikimedia.org/wikipedia/commons/9/9c/Bluewhale_with_calf.jpg', type: 'img' },
      { level: 'medium', question: 'Hewan ini bisa memutar kepalanya 270 derajat.', options: ['Kucing', 'Burung Hantu', 'Tikus', 'Kuda'], answer: 'Burung Hantu', media: 'https://upload.wikimedia.org/wikipedia/commons/0/0e/Barn_Owl_Tyto_alba.jpg', type: 'img' },
      { level: 'medium', question: 'Video suara hewan ini sangat nyaring.', options: ['Anjing', 'Ayam', 'Kakatua', 'Sapi'], answer: 'Kakatua', media: 'https://www.w3schools.com/html/mov_bbb.mp4', type: 'video' },
      { level: 'medium', question: 'Hewan apa yang punya belalai?', options: ['Singa', 'Gajah', 'Macan', 'Rusa'], answer: 'Gajah', media: 'https://upload.wikimedia.org/wikipedia/commons/3/37/African_Bush_Elephant.jpg', type: 'img' },

      { level: 'hard', question: 'Hewan apa yang hidup di Antartika dan tidak bisa terbang?', options: ['Penguin', 'Burung Unta', 'Elang', 'Bebek'], answer: 'Penguin', media: 'https://upload.wikimedia.org/wikipedia/commons/f/f6/Aptenodytes_forsteri_-Snow_Hill_Island%2C_Antarctica_-adults_and_chick-8.jpg', type: 'img' },
      { level: 'hard', question: 'Hewan ini bisa bertahan hidup tanpa air selama berminggu-minggu.', options: ['Unta', 'Sapi', 'Domba', 'Kucing'], answer: 'Unta', media: 'https://upload.wikimedia.org/wikipedia/commons/f/f9/Camel-profile.jpg', type: 'img' },
      { level: 'hard', question: 'Hewan tercepat di darat?', options: ['Kijang', 'Singa', 'Macan Tutul', 'Cheetah'], answer: 'Cheetah', media: 'https://upload.wikimedia.org/wikipedia/commons/7/71/Cheetah4.jpg', type: 'img' },
    ];

    const timeLimits = { easy: 30, medium: 60, hard: 90 };
    const bgMusic = document.getElementById("bgMusic");
    const musicToggle = document.getElementById("musicToggle");
    let currentQuestion = 0, score = 0, timer, timerInterval;
    let shuffled = [];

    function shuffleQuestions() {
      const levels = ['easy', 'medium', 'hard'];
      levels.forEach(level => {
        const filtered = questions.filter(q => q.level === level);
        shuffled.push(...filtered.sort(() => 0.5 - Math.random()));
      });
    }

    function showQuestion() {
      clearInterval(timerInterval);
      document.getElementById("result").innerText = "";
      const q = shuffled[currentQuestion];
      document.getElementById("questionText").innerText = q.question;
      const media = q.type === 'img'
        ? `<img src="${q.media}" alt="gambar">`
        : `<video controls autoplay muted loop><source src="${q.media}" type="video/mp4"></video>`;
      document.getElementById("mediaContainer").innerHTML = media;
      document.getElementById("options").innerHTML = "";
      q.options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => checkAnswer(opt);
        document.getElementById("options").appendChild(btn);
      });
      startTimer(timeLimits[q.level]);
    }

    function startTimer(duration) {
      timer = duration;
      document.getElementById("timer").innerText = `‚è± ${timer} detik`;
      timerInterval = setInterval(() => {
        timer--;
        document.getElementById("timer").innerText = `‚è± ${timer} detik`;
        if (timer <= 0) {
          clearInterval(timerInterval);
          checkAnswer(null);
        }
      }, 1000);
    }

    function checkAnswer(selected) {
      clearInterval(timerInterval);
      const correct = shuffled[currentQuestion].answer;
      const result = document.getElementById("result");
      if (selected === correct) {
        score++;
        result.innerText = "‚úÖ Benar!";
        new Audio('https://www.soundjay.com/buttons/sounds/button-09.mp3').play();
      } else {
        result.innerText = `‚ùå Salah. Jawaban: ${correct}`;
        new Audio('https://www.soundjay.com/buttons/sounds/button-10.mp3').play();
      }
      document.getElementById("score").innerText = `Skor: ${score}`;
    }

    document.getElementById("nextBtn").onclick = () => {
      currentQuestion++;
      if (currentQuestion < shuffled.length) {
        showQuestion();
      } else {
        document.getElementById("questionContainer").style.display = "none";
        document.getElementById("nextBtn").style.display = "none";
        document.getElementById("result").innerText = `Permainan selesai! Skor akhir: ${score}`;
        saveToLeaderboard(score);
      }
    };

    musicToggle.onclick = () => {
      if (bgMusic.paused) {
        bgMusic.play();
        musicToggle.textContent = "üîà Matikan Musik";
      } else {
        bgMusic.pause();
        musicToggle.textContent = "üîä Musik";
      }
    }

    function saveToLeaderboard(finalScore) {
      const name = prompt("Masukkan nama Anda untuk leaderboard:") || "Anonim";
      fetch("https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec", {
        method: "POST",
        body: JSON.stringify({ name, score: finalScore })
      });
    }

    function loadLeaderboard() {
      fetch("https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec")
        .then(res => res.json())
        .then(data => {
          const list = document.getElementById("leaderboard");
          list.innerHTML = "";
          data.forEach(entry => {
            const li = document.createElement("li");
            li.textContent = `${entry.name}: ${entry.score}`;
            list.appendChild(li);
          });
        });
    }

    shuffleQuestions();
    showQuestion();
    loadLeaderboard();
  </script>
</body>
</html>
